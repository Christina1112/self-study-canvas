<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>闭包</title>
</head>
<body>
    <h1>闭包</h1>
    <p>闭包，是指有权访问另一个函数作用域中的变量的函数</p>
    <p>创建闭包常见方式，就是在一个函数内部创建另一个函数，以之前的比较函数为例</p>
    <p>闭包副作用：闭包只能取得包含函数中任何变量的最后一个值。闭包保存的是整个变量对象</p>
    <script>
        function createComparisonFunction(propertyName){
            return function(obj1,obj2){ //返回一个匿名函数，外面包着一层函数，创建了一个闭包
                var value1 = obj1[propertyName];  //此处可以访问到外面函数的参数propertyName属性
                var value2 = obj2[propertyName];
                if(value1<value2){
                    return -1;
                }else if(value1>value2){
                    return 1;
                }else{
                    return 0;
                }
            }
        }
    </script>
    <p>由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存，过度使用闭包会导致内存占用过多，虽然v8等优化后的JavaScript引擎会尝试回收被闭包占用的内存，但仍需要谨慎使用闭包。</p>
</body>
</html>